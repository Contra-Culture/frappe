<DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>frappe.js</title>
    <sctipt type="module" src="o.mjs">
    <script type="module">
      "use strict"
      import {Universe, VM} from "./o.mjs"
      const u = new Universe(
        (stream)=> {
          stream("orderReceived", () => {})
          stream("orderConfirmed", () => {})
          stream("orderRejected", () => {})
          stream("orderPackaged", () => {})
          stream("orderDelivered", () => {})
          stream("orderLost", () => {})
        },
        (object) => {
          object( "orderConfirmator",
                  (props) => { },
                  (prop) => {
                    prop()
                    prop()
                    prop()
                  },
                  (reaction) => {
                    reaction("orderReceived", (msg) => { }, ["orderConfirmed", "orderRejected"])
                  } )
          object( "orderPackager",
                  (props) => { },
                  (prop) => {
                    prop("n", () => {  }, () => {  })
                    prop()
                    prop()
                  },
                  (reaction) => {
                    reaction("orderConfirmed", (msg) => { }, ["orderPackaged"])
                  } )
          object( "orderDeliverer",
                  (props) => {},
                  (prop) => {
                    prop()
                    prop()
                    prop()
                  },
                  (reaction) => {
                    reaction("orderPackaged", (msg) => { }, ["orderDelivered", "orderLost"])
                  } )
        }
      )
      u.inspect()
    </script>
  </head>
  <body>

  </body>
</html>
